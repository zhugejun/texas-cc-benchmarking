version: 2

sources:
  - name: raw_ipeds
    description: 'Raw IPEDS data loaded directly from CSV files'
    schema: RAW_IPEDS
    database: TEXAS_CC

    tables:

      # completions
      - name: c_a_2020
        description: 'Completions by Award Level and CIP code (2020 data)'
        columns: &c_a_columns
          - name: UNITID
            description: 'Unique identification number of the institution'
          - name: CIPCODE
            description: 'Classification of Instructional Programs code'
          - name: AWLEVEL
            description: 'Award level code'
          - name: MAJORNUM
            description: 'Major number (1=first major, 2=second major)'
          - name: CTOTALT
            description: 'Total completions'
          - name: CTOTALM
            description: 'Total completions - men'
          - name: CTOTALW
            description: 'Total completions - women'
          - name: CAIANT
            description: 'Completions - American Indian or Alaska Native'
          - name: CASIAT
            description: 'Completions - Asian'
          - name: CBKAAT
            description: 'Completions - Black or African American'
          - name: CHISPT
            description: 'Completions - Hispanic or Latino'
          - name: CNHPIT
            description: 'Completions - Native Hawaiian or Pacific Islander'
          - name: CWHITT
            description: 'Completions - White'
          - name: C2MORT
            description: 'Completions - Two or more races'
          - name: CUNKNT
            description: 'Completions - Race/ethnicity unknown'
          - name: CNRALT
            description: 'Completions - Nonresident alien'

      - name: c_a_2021
        description: 'Completions by Award Level and CIP code (2021 data)'
        columns: *c_a_columns

      - name: c_a_2022
        description: 'Completions by Award Level and CIP code (2022 data)'
        columns: *c_a_columns

      - name: c_a_2023
        description: 'Completions by Award Level and CIP code (2023 data)'
        columns: *c_a_columns

      - name: c_a_2024
        description: 'Completions by Award Level and CIP code (2024 data)'
        columns: *c_a_columns
      

      # institutional characteristics
      - name: hd_2024
        description: 'Institutional Characteristics (Directory Information) 2024'
        columns: &hd_columns
          - name: UNITID
            description: 'Unique identification number of the institution'
            tests:
              - unique
              - not_null
          - name: INSTNM
            description: 'Institution name'
          - name: IALIAS
            description: 'Institution name alias'
          - name: CITY
            description: 'City location of institution'
          - name: STABBR
            description: 'State abbreviation'
          - name: ZIP
            description: 'ZIP code'
          - name: FIPS
            description: 'FIPS state code'
          - name: OBEREG
            description: 'Bureau of Economic Analysis region code'
          - name: SECTOR
            description: 'Institutional sector (1-9)'
          - name: ICLEVEL
            description: 'Level of institution (1=4-year, 2=2-year, 3=Less-than-2-year)'
          - name: CONTROL
            description: 'Control of institution (1=Public, 2=Private nonprofit, 3=Private for-profit)'
          - name: HLOFFER
            description: 'Highest level of offering'
          - name: UGOFFER
            description: 'Undergraduate offering (1=Yes, 2=No)'
          - name: GROFFER
            description: 'Graduate offering (1=Yes, 2=No)'
          - name: LOCALE
            description: 'Degree of urbanization (locale code)'
          - name: INSTSIZE
            description: 'Institution size category'
          - name: WEBADDR
            description: 'Institution website URL'
          - name: ADMINURL
            description: 'Admissions office URL'
          - name: FAIDURL
            description: 'Financial aid office URL'
          - name: APPLURL
            description: 'Online application URL'
      
      - name: hd_2023
        description: 'Institutional Characteristics 2023'
        columns: *hd_columns

      - name: hd_2022
        description: 'Institutional Characteristics 2022'
        columns: *hd_columns

      - name: hd_2021
        description: 'Institutional Characteristics 2021'
        columns: *hd_columns

      - name: hd_2020
        description: 'Institutional Characteristics 2020'
        columns: *hd_columns

      # enrollment
      - name: effy_2024
        description: '12-Month Enrollment (unduplicated headcount) 2024'
        columns: &effy_columns
          - name: UNITID
            description: 'Unique identification number of the institution'
          - name: EFFYALEV
            description: 'Level of student (1=All, 2=Undergrad, 4=Grad, 21=Undergrad degree-seeking, 22=Undergrad non-degree-seeking)'
          - name: EFYTOTLT
            description: 'Total 12-month enrollment'
          - name: EFYTOTLM
            description: 'Total 12-month enrollment - men'
          - name: EFYTOTLW
            description: 'Total 12-month enrollment - women'
          - name: EFYAIANT
            description: 'Enrollment - American Indian or Alaska Native'
          - name: EFYASIAT
            description: 'Enrollment - Asian'
          - name: EFYBKAAT
            description: 'Enrollment - Black or African American'
          - name: EFYHISPT
            description: 'Enrollment - Hispanic or Latino'
          - name: EFYNHPIT
            description: 'Enrollment - Native Hawaiian or Pacific Islander'
          - name: EFYWHITT
            description: 'Enrollment - White'
          - name: EFY2MORT
            description: 'Enrollment - Two or more races'
          - name: EFYUNKNT
            description: 'Enrollment - Race/ethnicity unknown'
          - name: EFYNRALT
            description: 'Enrollment - Nonresident alien'


      - name: effy_2023
        description: '12-Month Enrollment (unduplicated headcount) 2023'
        columns: *effy_columns

      - name: effy_2022
        description: '12-Month Enrollment (unduplicated headcount) 2022'
        columns: *effy_columns

      - name: effy_2021
        description: '12-Month Enrollment (unduplicated headcount) 2021'
        columns: *effy_columns

      - name: effy_2020
        description: '12-Month Enrollment (unduplicated headcount) 2020'
        columns: *effy_columns

      - name: gr_2024
        description: 'Graduation Rates for first-time, full-time degree-seeking students'
        columns:
          - name: UNITID
            description: 'Unique identification number of the institution'
          - name: GRTOTLT
            description: 'Total graduation rate'

      - name: sfa_2024
        description: 'Student Financial Aid information'
        columns:
          - name: UNITID
            description: 'Unique identification number of the institution'
          - name: SCUGRAD
            description: 'Number of undergraduates analyzed for financial aid'
